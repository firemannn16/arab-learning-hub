<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ - –ê—Ä–∞–±—Å–∫–∏–µ —Å–ª–æ–≤–∞</title>
  <script src="service-worker-register.js"></script>
  <script src="sidebar-menu.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f5f7fa;
      color: #1f2937;
      line-height: 1.6;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .header {
      background: white;
      padding: 20px 25px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .header h1 {
      font-size: 24px;
      color: #333;
    }

    .header-info {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .word-count {
      font-size: 14px;
      color: #6b7280;
      background: #f3f4f6;
      padding: 6px 12px;
      border-radius: 20px;
    }

    .copy-all-btn {
      padding: 10px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .copy-all-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    .copy-all-btn:active {
      transform: translateY(0);
    }

    .words-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .word-item {
      padding: 14px 20px;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .word-item:hover {
      background: #f8f9ff;
    }

    .word-item:last-child {
      border-bottom: none;
    }

    .word-item.copied {
      background: #e8f5e9;
    }

    .word-text {
      flex: 1;
      font-size: 16px;
      line-height: 1.8;
      word-break: break-word;
    }

    .copy-icon {
      opacity: 0;
      color: #667eea;
      font-size: 14px;
      padding: 4px 8px;
      transition: opacity 0.2s;
      flex-shrink: 0;
    }

    .word-item:hover .copy-icon {
      opacity: 1;
    }

    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #1f2937;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 14px;
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 9999;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .loading {
      text-align: center;
      padding: 60px 20px;
      color: #6b7280;
      font-size: 16px;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid #e5e7eb;
      border-top-color: #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .error {
      text-align: center;
      padding: 40px 20px;
      color: #ef4444;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤ */
    @media (max-width: 600px) {
      body {
        padding: 15px;
      }

      .header {
        padding: 15px;
      }

      .header h1 {
        font-size: 20px;
      }

      .word-item {
        padding: 12px 15px;
      }

      .word-text {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìã –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤</h1>
      <div class="header-info">
        <span class="word-count" id="wordCount">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        <button class="copy-all-btn" id="copyAllBtn" disabled>
          <span>üìã</span> –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë
        </button>
      </div>
    </div>

    <div class="words-container" id="wordsContainer">
      <div class="loading">
        <div class="loading-spinner"></div>
        –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–æ–≤...
      </div>
    </div>
  </div>

  <div class="toast" id="toast">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>

  <script>
    let allWordsText = '';

    // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2000);
    }

    // –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch (e) {
        // Fallback
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        return true;
      }
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–æ–≤
    async function loadWords() {
      const container = document.getElementById('wordsContainer');
      const countEl = document.getElementById('wordCount');
      const copyAllBtn = document.getElementById('copyAllBtn');

      try {
        const response = await fetch('words.txt');
        if (!response.ok) throw new Error('–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω');
        
        const text = await response.text();
        allWordsText = text;
        
        const lines = text.split('\n').filter(line => line.trim() && !line.trim().startsWith('#'));
        
        countEl.textContent = `${lines.length} —Å–ª–æ–≤`;
        copyAllBtn.disabled = false;

        // –°–æ–∑–¥–∞—ë–º HTML –¥–ª—è —Å–ª–æ–≤
        let html = '';
        lines.forEach((line, index) => {
          const cleanLine = line.trim();
          if (cleanLine) {
            html += `
              <div class="word-item" data-text="${cleanLine.replace(/"/g, '&quot;')}" onclick="copyWord(this)">
                <span class="word-text">${escapeHtml(cleanLine)}</span>
                <span class="copy-icon">üìã –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
              </div>
            `;
          }
        });

        container.innerHTML = html;

      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
        container.innerHTML = '<div class="error">‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤</div>';
        countEl.textContent = '–û—à–∏–±–∫–∞';
      }
    }

    // –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ
    async function copyWord(element) {
      const text = element.getAttribute('data-text');
      await copyText(text);
      
      // –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫
      element.classList.add('copied');
      setTimeout(() => {
        element.classList.remove('copied');
      }, 500);
      
      showToast('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!');
    }

    // –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë
    document.getElementById('copyAllBtn').addEventListener('click', async () => {
      if (allWordsText) {
        await copyText(allWordsText);
        showToast('–í–µ—Å—å —Å–ø–∏—Å–æ–∫ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
      }
    });

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    loadWords();
  </script>
</body>
</html>
